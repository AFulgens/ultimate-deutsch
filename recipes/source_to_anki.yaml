- generate_guids_in_csvs:
    source:
      - src/data/guid.csv
    columns:
      - guid

- build_parts:
  - note_model_from_yaml_part:
      part_id: Ultimate Deutsch
      file: src/note_models/Ultimate_Deutsch.yaml
#  - note_model_from_yaml_part:
#      part_id: Ultimate Deutsch [A1]
#      file: src/note_models/Ultimate_Deutsch_[A1].yaml

  - headers_from_yaml_part:
      - part_id: default header
        file: src/headers/default.yaml
        override:
          deck_description_html_file: src/headers/desc.html
  - media_group_from_folder:
    - part_id: all_media
      source: src/media
      recursive: true

  - notes_from_csvs:
      part_id: substantiv

      note_model_mappings:
        - note_models:
            - Ultimate Deutsch
          columns_to_fields:
            <<:
              guid             : guid
              tags             : tags
              word             : word
            nominativ        : Nominativ
            spezifizierung_pk: Spezifizierung_pk
            geschlecht       : Geschlecht
            nominativ plural : Nominativ (Plural)
            genitiv          : Genitiv
            genitiv plural   : Genitiv (Plural)
            dativ            : Dativ
            dativ plural     : Dativ (Plural)
            akkusativ        : Akkusativ
            akkusativ plural : Akkusativ (Plural)
            hinweis          : Hinweis
            word:en          : English
            hinweis:en       : Hint

          personal_fields: [ ]
      file_mappings:
        - file: src/data/word.csv
          note_model: Ultimate Deutsch
          derivatives:
            - file: src/data/guid.csv
            - file: src/data/substantiv.csv

- generate_crowd_anki:
    <<:
      headers: default header
      media:
        parts: [all_media]
      note_models:
        parts:
          - part_id: Ultimate Deutsch
    folder: build/Ultimate_Deutsch
    notes:
      part_id: substantiv

#- generate_crowd_anki:
#        <<: &extended_deck
#            headers: default header
#            media:
#                parts: [ all_media ]
#            note_models:
#                parts:
#                    - part_id: Ultimate Geography [Extended]
#
#        folder: build/Ultimate Geography [EN] [Extended]
#        notes:
#            part_id: english
#            <<: &override_nm
#                override:
#                    note_model: Ultimate Geography [Extended]
