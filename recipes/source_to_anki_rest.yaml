- generate_guids_in_csvs:
    source:
      - build/data/a1/word.csv
    columns:
      - guid

- build_parts:
  - note_model_from_yaml_part:
      part_id: UD Substantiv
      file: src/note_models/Ultimate_Deutsch_substantiv.yaml
  - note_model_from_yaml_part:
      part_id: UD Verb
      file: src/note_models/Ultimate_Deutsch_verb.yaml

  - headers_from_yaml_part:
      - part_id: default header
        file: src/headers/default.yaml
        override:
          deck_description_html_file: src/headers/desc.html

  - media_group_from_folder:
    - part_id: all_media
      source: src/media
      recursive: true

  - notes_from_csvs:
      part_id: Ultimate Deutsch

      note_model_mappings:
        - note_models:
            - UD Substantiv
            - UD Verb
          columns_to_fields:
            <<:
              guid       : guid
              tags       : tags
              word       : word
              word:en    : english
              hinweis:en : hint
            nominativ         : nominativ
            spezifizierung_pk : spezifizierung_pk
            geschlecht        : geschlecht
            nominativ_plural  : nominativ_plural
            genitiv           : genitiv
            genitiv_plural    : genitiv_plural
            dativ             : dativ
            dativ_plural      : dativ_plural
            akkusativ         : akkusativ
            akkusativ_plural  : akkusativ_plural
            hinweis           : hinweis

            praesens singular 1              : praesens singular 1
            praesens singular 2              : praesens singular 2
            praesens singular 3              : praesens singular 3
            praesens plural 1                : praesens plural 1
            praesens plural 2                : praesens plural 2
            praesens plural 3                : praesens plural 3
            praesens konjuktiv singular 1    : praesens konjuktiv singular 1
            praesens konjuktiv singular 2    : praesens konjuktiv singular 2
            praesens konjuktiv singular 3    : praesens konjuktiv singular 3
            praesens konjuktiv plural 1      : praesens konjuktiv plural 1
            praesens konjuktiv plural 2      : praesens konjuktiv plural 2
            praesens konjuktiv plural 3      : praesens konjuktiv plural 3
            imperativ singular 2             : imperativ singular 2
            imperativ plural 2               : imperativ plural 2
            praeteritum singular 1           : praeteritum singular 1
            praeteritum singular 2           : praeteritum singular 2
            praeteritum singular 3           : praeteritum singular 3
            praeteritum plural 1             : praeteritum plural 1
            praeteritum plural 2             : praeteritum plural 2
            praeteritum plural 3             : praeteritum plural 3
            praeteritum konjuktiv singular 1 : praeteritum konjuktiv singular 1
            praeteritum konjuktiv singular 2 : praeteritum konjuktiv singular 2
            praeteritum konjuktiv singular 3 : praeteritum konjuktiv singular 3
            praeteritum konjuktiv plural 1   : praeteritum konjuktiv plural 1
            praeteritum konjuktiv plural 2   : praeteritum konjuktiv plural 2
            praeteritum konjuktiv plural 3   : praeteritum konjuktiv plural 3
            partizip 1                       : partizip 1
            partizip 2                       : partizip 2
            infinitiv                        : infinitiv
            perfekt mit                      : perfekt mit
            perfekt hinweis                  : perfekt hinweis

          personal_fields: [ ]
      file_mappings:
        - file: build/data/a1/word.csv
          derivatives:
            - file: build/data/a1/substantiv.csv
              note_model: UD Substantiv
            - file: build/data/a1/verb.csv
              note_model: UD Verb

- generate_crowd_anki:
    <<:
      headers: default header
      media:
        parts: [all_media]
      note_models:
        parts:
          - part_id: UD Substantiv
          - part_id: UD Verb
    folder: build/Ultimate_Deutsch
    notes:
      part_id: Ultimate Deutsch

#- generate_crowd_anki:
#        <<: &extended_deck
#            headers: default header
#            media:
#                parts: [ all_media ]
#            note_models:
#                parts:
#                    - part_id: Ultimate Geography [Extended]
#
#        folder: build/Ultimate Geography [EN] [Extended]
#        notes:
#            part_id: english
#            <<: &override_nm
#                override:
#                    note_model: Ultimate Geography [Extended]
