#- generate_guids_in_csvs: # GUID generation is done one time via the source_to_anki_c.yaml recipe

- build_parts:
  - note_model_from_yaml_part:
      part_id: UD Substantiv A1
      file: build/note_models/a1/Ultimate_Deutsch_substantiv.yaml
  - note_model_from_yaml_part:
      part_id: UD Verb A1
      file: build/note_models/a1/Ultimate_Deutsch_verb.yaml

  - headers_from_yaml_part:
      - part_id: default header:a1:en
        file: src/headers/header.yaml
        override:
          deck_description_html_file: build/headers/desc.html
          crowdanki_uuid: 4f8f4cf9-4950-457f-a0ff-4f06684b4347
          name: Ultimate Deutsch (A1) [EN]
      - part_id: default header:a1:hu
        file: src/headers/header.yaml
        override:
          deck_description_html_file: build/headers/desc.html
          crowdanki_uuid: f847360e-f699-460f-92ac-af63fffa97aa
          name: Ultimate Deutsch (A1) [HU]

  - media_group_from_folder:
    - part_id: all_media
      source: src/media
      recursive: true

  - notes_from_csvs:
      part_id: UD A1 english

      note_model_mappings:
        - note_models: &note_models
            - UD Substantiv A1
            - UD Verb A1
          columns_to_fields:
            <<: &columns_to_fields
              tags       : tags
              word       : word

              nominativ         : nominativ
              spezifizierung_pk : spezifizierung_pk
              geschlecht        : geschlecht
              nominativ_plural  : nominativ_plural
              genitiv           : genitiv
              genitiv_plural    : genitiv_plural
              dativ             : dativ
              dativ_plural      : dativ_plural
              akkusativ         : akkusativ
              akkusativ_plural  : akkusativ_plural
              hinweis           : hinweis

              praesens singular 1              : praesens singular 1
              praesens singular 2              : praesens singular 2
              praesens singular 3              : praesens singular 3
              praesens plural 1                : praesens plural 1
              praesens plural 2                : praesens plural 2
              praesens plural 3                : praesens plural 3
              praesens konjuktiv singular 1    : praesens konjuktiv singular 1
              praesens konjuktiv singular 2    : praesens konjuktiv singular 2
              praesens konjuktiv singular 3    : praesens konjuktiv singular 3
              praesens konjuktiv plural 1      : praesens konjuktiv plural 1
              praesens konjuktiv plural 2      : praesens konjuktiv plural 2
              praesens konjuktiv plural 3      : praesens konjuktiv plural 3
              imperativ singular 2             : imperativ singular 2
              imperativ plural 2               : imperativ plural 2
              praeteritum singular 1           : praeteritum singular 1
              praeteritum singular 2           : praeteritum singular 2
              praeteritum singular 3           : praeteritum singular 3
              praeteritum plural 1             : praeteritum plural 1
              praeteritum plural 2             : praeteritum plural 2
              praeteritum plural 3             : praeteritum plural 3
              praeteritum konjuktiv singular 1 : praeteritum konjuktiv singular 1
              praeteritum konjuktiv singular 2 : praeteritum konjuktiv singular 2
              praeteritum konjuktiv singular 3 : praeteritum konjuktiv singular 3
              praeteritum konjuktiv plural 1   : praeteritum konjuktiv plural 1
              praeteritum konjuktiv plural 2   : praeteritum konjuktiv plural 2
              praeteritum konjuktiv plural 3   : praeteritum konjuktiv plural 3
              partizip 1                       : partizip 1
              partizip 2                       : partizip 2
              infinitiv                        : infinitiv
              perfekt mit                      : perfekt mit
              perfekt hinweis                  : perfekt hinweis

            guid       : guid
            word:en    : fremd
            hinweis:en : hinweis fremd

          personal_fields: [ ]
      file_mappings: &file_mappings
        - file: build/data/a1/word.csv
          derivatives:
            - file: build/data/a1/guid.csv
            - file: build/data/a1/substantiv.csv
              note_model: UD Substantiv A1
            - file: build/data/a1/verb.csv
              note_model: UD Verb A1

  - notes_from_csvs:
      part_id: UD A1 hungarian

      note_model_mappings:
        - note_models: *note_models
          columns_to_fields:
            <<: *columns_to_fields
            guid:hu : guid
            word:hu : fremd
            hinweis:hu : hinweis fremd
      file_mappings: *file_mappings


- generate_crowd_anki:
    <<: &crowd_anki_common
      media:
        parts: [all_media]
      note_models:
        parts:
          - part_id: UD Substantiv A1
          - part_id: UD Verb A1
    headers: default header:a1:en
    folder: build/Ultimate_Deutsch_A1_EN
    notes:
      part_id: UD A1 english

- generate_crowd_anki:
    <<: *crowd_anki_common
    headers: default header:a1:hu
    folder: build/Ultimate_Deutsch_A1_HU
    notes:
      part_id: UD A1 hungarian
